<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Test - AI Assistant</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen p-8">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl font-bold text-center mb-8">API Connection Test</h1>
        
        <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
            <h2 class="text-xl font-semibold mb-4">API Configuration</h2>
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">API Key</label>
                    <input type="password" id="apiKey" value="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" 
                           class="w-full px-4 py-2 border border-gray-300 rounded-lg">
                </div>
                <div class="flex gap-2">
                    <button onclick="testDirectAPI()" class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600">
                        Test Direct API Call
                    </button>
                    <button onclick="testWithConfig()" class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600">
                        Test With Config
                    </button>
                </div>
            </div>
        </div>

        <div class="bg-white rounded-lg shadow-lg p-6">
            <h2 class="text-xl font-semibold mb-4">Test Results</h2>
            <div id="results" class="space-y-4">
                <p class="text-gray-500">Click a test button to see results...</p>
            </div>
        </div>
    </div>

    <script src="js/config.js"></script>
    <script>
        function addResult(message, type = 'info') {
            const resultsDiv = document.getElementById('results');
            const colors = {
                success: 'text-green-600 bg-green-50',
                error: 'text-red-600 bg-red-50',
                info: 'text-blue-600 bg-blue-50'
            };
            
            const div = document.createElement('div');
            div.className = `p-4 rounded-lg border ${colors[type] || colors.info}`;
            div.innerHTML = `
                <div class="flex items-center justify-between">
                    <span>${message}</span>
                    <span class="text-xs">${new Date().toLocaleTimeString()}</span>
                </div>
            `;
            resultsDiv.insertBefore(div, resultsDiv.firstChild);
        }

        async function testDirectAPI() {
            const apiKey = document.getElementById('apiKey').value;
            addResult('Testing direct API call...', 'info');
            
            try {
                const response = await fetch('https://api.groq.com/openai/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${apiKey}`
                    },
                    body: JSON.stringify({
                        model: 'llama3-70b-8192',
                        messages: [
                            {
                                role: 'user',
                                content: 'Say "Hello World"'
                            }
                        ],
                        max_tokens: 50,
                        temperature: 0.1
                    })
                });

                addResult(`Response status: ${response.status}`, response.ok ? 'success' : 'error');
                
                if (response.ok) {
                    const result = await response.json();
                    addResult(`Response: ${JSON.stringify(result, null, 2)}`, 'success');
                } else {
                    const error = await response.text();
                    addResult(`Error: ${error}`, 'error');
                }
            } catch (error) {
                addResult(`Network error: ${error.message}`, 'error');
            }
        }

        async function testWithConfig() {
            addResult('Testing with config.js...', 'info');
            
            try {
                const messages = [
                    {
                        role: 'user',
                        content: 'Say "Hello World"'
                    }
                ];

                const response = await callGroqAPI(messages, 50, 0.1);
                addResult(`Config test successful: ${response}`, 'success');
            } catch (error) {
                addResult(`Config test failed: ${error.message}`, 'error');
            }
        }
    </script>
</body>
</html> 